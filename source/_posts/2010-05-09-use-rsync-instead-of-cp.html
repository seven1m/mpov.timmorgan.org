---
layout: post
title: Use rsync instead of cp
tags: []
status: publish
type: post
published: true
meta: {}
---
<p>I tend to use rsync when others would typically use a simple cp for copying files. A few reasons:</p><ol><li>It can be canceled in the middle, and resumed later.</li><li>It can show a progress bar that (while not perfect) is great for large files or lots of files.</li><li>It will only copy the changed files and won't clobber already existing directories of files at the target.</li></ol><p>rsync is available on Linux, Mac, and there's a binary somewhere on teh intarwebs for Windows.<p />To use, you almost always want to pass the -a flag, which stands for "archive" -- basically a convenience flag for -r (recursive), -p (permissions), -t (timestamps), and a few others. I can't think of a time I haven't used -a when using rsync.<p /> Following that, basic usage looks like this:<p /><span style="font-family: courier new,monospace;">rsync -a source destination</span><p />The other thing to remember when using rsync is that it's picky with slashes; if you put a trailing lash on a path, then rsync takes that to mean you want to copy the <em>contents </em>of that path. If, on the other hand, you leave off the slash, it will copy the path <em>and</em> its contents. A few examples will help:<p /> # This will copy the stuff directory (and its contents) to the documents directory<br /><span style="font-family: courier new,monospace;">rsync -a /home/tim/stuff /home/tim/documents <p /><span style="font-family: arial,helvetica,sans-serif;"># This will copy only the <em>contents</em> of stuff to the documents directory</span><br /> rsync -a /home/tim/stuff/ home/tim/documents</span><p /><span style="font-family: arial,helvetica,sans-serif;">Some other handy arguments:<br /></span></p><ul><li style="font-family: courier new,monospace;">--stats</li><li style="font-family: courier new,monospace;"> --progress</li></ul><p><span style="font-family: arial,helvetica,sans-serif;">So, to put it all together:<p /><span style="font-family: courier new,monospace;">rsync -a --stats --progress /home/tim/stuff /home/tim/documents<p /><span style="font-family: arial,helvetica,sans-serif;">And, better yet, rsync can work over ssh (if it's installed on both hosts). Just put an ssh host on the front of either path:<p /> <span style="font-family: courier new,monospace;">rsync -a --stats --progress /home/tim/stuff <a href="mailto:tim@foobar.example.com">tim@foobar.example.com</a>:/home/tim/<p /><span style="font-family: arial,helvetica,sans-serif;">or</span><p />rsync -a --stats --progress <a href="mailto:tim@foobar.example.com">tim@foobar.example.com</a>:/home/tim/stuff /home/tim/<p /> <span style="font-family: arial,helvetica,sans-serif;">So, there you have it. rsync can do tons more stuff, but this is a great start. If this is all you learn of rsync, you will be that much better off.</span></span></span></span></span></p>
